apiVersion: v1
data:
  kv_register.sh: |
    #!/bin/sh

    echo "INIT CONFIG KAFKA BROKER"
    # BROKER local
    consul kv put local/broker/kafka/BROKER_1 "localhost:9092"
    # BROKER production
    consul kv put production/broker/kafka/BROKER_1 "kafka-local-broker-1:29092"

    # SCHEMA REGISTRY local
    consul kv put local/broker/kafka/SCHEMA_REGISTRY "http://localhost:8081"
    # SCHEMA REGISTRY local
    consul kv put production/broker/kafka/SCHEMA_REGISTRY "http://schema-registry-local:8081"

    echo "DONE INIT CONFIG KAFKA BROKER"
  kv_register_connector.sh: |
    #!/bin/sh

    echo "INIT CONFIG KAFKA TOPICS SINK & SOURCE CONNECTOR"
    # ----------- NOTIFICATION

    ## LOCAL
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SOURCE/MONGO/NOTIFICATION/NOTIFICATION-TEMPLATES "source-mongo-notification-notification_templates"

    ## PRODUCTION
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SOURCE/MONGO/NOTIFICATION/NOTIFICATION-TEMPLATES "source-mongo-notification-notification_templates"

    # ----------- PAYMENT
    ## LOCAL
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PAYMENT/PAYMENT-PROVIDERS "sink-pg-payments-payment_providers"
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PAYMENT/PAYMENT-ITEMS "sink-pg-payments-payment_items"
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PAYMENT/PAYMENTS "sink-pg-payments-payments"

    ## PRODUCTION
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PAYMENT/PAYMENT-PROVIDERS "sink-pg-payments-payment_providers"
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PAYMENT/PAYMENT-ITEMS "sink-pg-payments-payment_items"
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PAYMENT/PAYMENTS "sink-pg-payments-payments"

    # ----------- PRODUCT
    ## LOCAL
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/ES/PRODUCT/PRODUCTS "sink-es-products-products"
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PRODUCT/PRODUCTS "sink-pg-products-products"

    #PRODUCTION
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/ES/PRODUCT/PRODUCTS "sink-es-products-products"
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/PRODUCT/PRODUCTS "sink-pg-products-products"

    # ----------- SHIPPING
    ## LOCAL
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/SHIPPING/SHIPPING-PROVIDERS "sink-pg-shippings-shipping_providers"
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/SHIPPING/SHIPPINGS "sink-pg-shippings-shippings"

    ## PRODUCTION
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/SHIPPING/SHIPPING-PROVIDERS "sink-pg-shippings-shipping_providers"
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/SHIPPING/SHIPPINGS "sink-pg-shippings-shippings"

    # ----------- USER
    ## LOCAL
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/USER/USERS "sink-pg-users-users"
    consul kv put local/broker/kafka/TOPICS/CONNECTOR/SINK/PG/USER/ROLES "sink-pg-users-roles"

    ## PRODUCTION
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/USER/USERS "sink-pg-users-users"
    consul kv put production/broker/kafka/TOPICS/CONNECTOR/SINK/PG/USER/ROLES "sink-pg-users-roles"


    echo "DONE INIT CONFIG KAFKA TOPICS SINK & SOURCE CONNECTOR"
  kv_register_topic.sh: |
    #!/bin/sh

    echo "INIT CONFIG KAFKA SNAPSHOT TOPICS"
    ## user local
    consul kv put local/broker/kafka/TOPICS/USER/USER_CREATED "snapshot-users-user_created"
    consul kv put local/broker/kafka/TOPICS/USER/USER_UPDATED "snapshot-users-user_updated"
    consul kv put local/broker/kafka/TOPICS/USER/USER_LOGIN "snapshot-users-user_login"
    consul kv put local/broker/kafka/TOPICS/USER/USER_LOGOUT "snapshot-users-user_logout"

    ## user production
    consul kv put production/broker/kafka/TOPICS/USER/USER_CREATED "snapshot-users-user_created"
    consul kv put production/broker/kafka/TOPICS/USER/USER_UPDATED "snapshot-users-user_updated"
    consul kv put production/broker/kafka/TOPICS/USER/USER_LOGIN "snapshot-users-user_login"
    consul kv put production/broker/kafka/TOPICS/USER/USER_LOGOUT "snapshot-users-user_logout"

    ## product local
    consul kv put local/broker/kafka/TOPICS/PRODUCT/PRODUCT_CREATED "snapshot-products-product_created"
    consul kv put local/broker/kafka/TOPICS/PRODUCT/PRODUCT_UPDATED "snapshot-products-product_updated"
    consul kv put local/broker/kafka/TOPICS/PRODUCT/PRODUCT_DELETED "snapshot-products-product_deleted"

    ## product production
    consul kv put production/broker/kafka/TOPICS/PRODUCT/PRODUCT_CREATED "snapshot-products-product_created"
    consul kv put production/broker/kafka/TOPICS/PRODUCT/PRODUCT_UPDATED "snapshot-products-product_updated"
    consul kv put production/broker/kafka/TOPICS/PRODUCT/PRODUCT_DELETED "snapshot-products-product_deleted"

    ## notification local
    consul kv put local/broker/kafka/TOPICS/NOTIFICATION/EMAIL_OTP_CREATED "snapshot-notifications-email_otp_created"
    consul kv put local/broker/kafka/TOPICS/NOTIFICATION/EMAIL_PAYMENT_ORDER_CREATED "snapshot-notifications-email_payment_order_created"

    ## notification production
    consul kv put production/broker/kafka/TOPICS/NOTIFICATION/EMAIL_OTP_CREATED "snapshot-notifications-email_otp_created"
    consul kv put production/broker/kafka/TOPICS/NOTIFICATION/EMAIL_PAYMENT_ORDER_CREATED "snapshot-notifications-email_payment_order_created"

    ## commerce local
    consul kv put local/broker/kafka/TOPICS/COMMERCE/CART_CREATED "snapshot-commerce-cart_created"
    consul kv put local/broker/kafka/TOPICS/COMMERCE/CART_UPDATED "snapshot-commerce-cart_updated"
    consul kv put local/broker/kafka/TOPICS/COMMERCE/CART_DELETED "snapshot-commerce-cart_deleted"
    consul kv put local/broker/kafka/TOPICS/COMMERCE/WISHLIST_CREATED "snapshot-commerce-wishlist_created"
    consul kv put local/broker/kafka/TOPICS/COMMERCE/WISHLIST_UPDATED "snapshot-commerce-wishlist_updated"
    consul kv put local/broker/kafka/TOPICS/COMMERCE/WISHLIST_DELETED "snapshot-commerce-wishlist_deleted"

    ## commerce production
    consul kv put production/broker/kafka/TOPICS/COMMERCE/CART_CREATED "snapshot-commerce-cart_created"
    consul kv put production/broker/kafka/TOPICS/COMMERCE/CART_UPDATED "snapshot-commerce-cart_updated"
    consul kv put production/broker/kafka/TOPICS/COMMERCE/CART_DELETED "snapshot-commerce-cart_deleted"
    consul kv put production/broker/kafka/TOPICS/COMMERCE/WISHLIST_CREATED "snapshot-commerce-wishlist_created"
    consul kv put production/broker/kafka/TOPICS/COMMERCE/WISHLIST_UPDATED "snapshot-commerce-wishlist_updated"
    consul kv put production/broker/kafka/TOPICS/COMMERCE/WISHLIST_DELETED "snapshot-commerce-wishlist_deleted"

    ## payment local
    consul kv put local/broker/kafka/TOPICS/PAYMENT/PAYMENT_ORDER_CREATED "snapshot-payments-payment_order_created"
    consul kv put local/broker/kafka/TOPICS/PAYMENT/PAYMENT_ORDER_CREATED_DELAYED "snapshot-payments-payment_order_cancelled_delayed"

    ## payment production
    consul kv put production/broker/kafka/TOPICS/PAYMENT/PAYMENT_ORDER_CREATED "snapshot-payments-payment_order_created"
    consul kv put production/broker/kafka/TOPICS/PAYMENT/PAYMENT_ORDER_CREATED_DELAYED "snapshot-payments-payment_order_cancelled_delayed"

    ## shipping local
    consul kv put local/broker/kafka/TOPICS/SHIPPING/SHIPPING_CREATED "snapshot-shippings-shipping_created"
    consul kv put local/broker/kafka/TOPICS/SHIPPING/SHIPPING_UPDATED "snapshot-shippings-shipping_updated"

    ## shipping production
    consul kv put production/broker/kafka/TOPICS/SHIPPING/SHIPPING_CREATED "snapshot-shippings-shipping_created"
    consul kv put production/broker/kafka/TOPICS/SHIPPING/SHIPPING_UPDATED "snapshot-shippings-shipping_updated"

    echo "DONE INIT CONFIG KAFKA SNAPSHOT TOPICS"
  service_register.sh: |
    #!/bin/sh
kind: ConfigMap
metadata:
  labels:
    io.kompose.service: consul-local
  name: consul-local-cm3
